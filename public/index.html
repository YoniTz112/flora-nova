<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×ª×¤×¨×™×˜ ×”××¡×¢×“×”</title>

<style>
body {
  font-family: 'David Libre', Arial, sans-serif;
  background: #fffaf0;
  direction: rtl;
  margin: 0;
  padding: 0;
  color: #333;
}

header {
  background-color: #1e90ff;
  color: white;
  padding: 20px;
  text-align: center;
  font-size: 2em;
  font-weight: bold;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

.container {
  padding: 20px;
  max-width: 600px;
  margin: auto;
  padding-bottom: 120px;
}

h2 {
  color: #1e90ff;
  margin-top: 25px;
  border-bottom: 2px solid #1e90ff;
  padding-bottom: 5px;
}

.item, .drink-container {
  margin-bottom: 15px;
  border-radius: 10px;
  background: #fff;
  padding: 10px 15px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.item label, .drink-container label {
  font-size: 1.3em;
  color: #00bfff;
  font-weight: bold;
}

input[type="number"], input[type="text"] {
  /*padding: 5px;*/
  /*width: 60px;*/
  font-size: 1em;
  margin-left: 5px;
  border-radius: 5px;
  border: 1px solid #ccc;
}

button {
  background-color: #ffcc00;
  border: none;
  padding: 12px 20px; /* AUMENTA O TAMANHO */
  font-size: 1.2em;   /* AUMENTA O TEXTO */
  cursor: pointer;
  margin-top: 10px;
  border-radius: 10px;
  transition: 0.3s;
  font-weight: bold;
}

button:hover {
  background-color: #e6b800;
}

/* Toppings */
.toppings {
  margin-top: 5px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.toppings label {
  display: flex;
  align-items: center;
  gap: 8px;
}

.toppings input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  border: 2px solid #1e90ff;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
}

.toppings input[type="checkbox"]:checked {
  background-color: #1e90ff;
  color: white;
}

.toppings input[type="checkbox"]:checked::after {
  content: "âœ”";
  font-size: 14px;
}

/* Cart */
#cartToggle {
  position: fixed;
  top: 50%;
  left: 0;
  border-radius: 0 5px 5px 0;
  transform: translateY(-50%);
  background-color: #ff6600;
  color: white;
  padding: 10px 12px;
  cursor: pointer;
  z-index: 200;
  font-weight: bold;
  font-size: 1em;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

.cart {
  background-color: #f8f1d1;
  padding: 10px;
  font-weight: bold;
  white-space: pre-line;
  position: fixed;
  top: 0;
  left: -320px;
  width: 320px;
  height: 100%;
  box-shadow: -2px 0 6px rgba(0,0,0,0.2);
  transition: left 0.3s ease;
  z-index: 150;
  overflow-y: auto;
}

.cart.open {
  left: 0;
}

.cart-item button {
  background-color: red;
  color: white;
  padding: 0 5px;
  font-size: 0.9em;
  border-radius: 3px;
  cursor: pointer;
}

/* Order message */
#orderMessage {
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.8);
  color:white;
  justify-content:center;
  align-items:center;
  font-size:2em;
  text-align:center;
  z-index:300;
  padding:20px;
  box-sizing:border-box;
  flex-direction:column;
}
#orderMessage button {
  margin-top:20px;
  padding:10px 20px;
  font-size:1em;
  cursor:pointer;
  background:#ffcc00;
  border:none;
  border-radius:5px;
  color:#000;
}

/* Popup de item adicionado */
.added-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #4caf50;
  color: white;
  padding: 20px 30px;
  border-radius: 15px;
  font-size: 1.6em;
  font-weight: bold;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 500;
}

.added-popup.show {
  opacity: 1;
}

.input-label {
  display: block;
  font-weight: bold;
  margin-top: 20px;
  margin-bottom: 8px;
  font-size: 1.5em;       /* Label maior */
  color: #1e90ff;
}

.styled-input {
  width: 100%;
  padding: 12px 15px;      /* altura confortÃ¡vel, nÃ£o gigante */
  font-size: 1.2em;        /* texto maior que o normal */
  border-radius: 10px;
  border: 2px solid #ccc;
  box-sizing: border-box;
}

.styled-input:focus {
  border-color: #1e90ff;
  box-shadow: 0 0 12px rgba(30,144,255,0.5);
  outline: none;
}
</style>
</head>

<div id="addedPopup" class="added-popup">× ×•×¡×£ ×œ×¢×’×œ×” âœ”</div>

<body>

<header>×ª×¤×¨×™×˜ ×”××˜×‘×— ×”×™×©×¨××œ×™ ×‘×™×ª ×—×‘×´×“ ×¤×œ×•×¨×”</header>

<div class="container">

<label for="customerName" class="input-label">×©×:</label>
<input type="text" id="customerName" placeholder="×”×›× ×¡ ×©×" required class="styled-input">

<label for="customerSurname" class="input-label">×©× ××©×¤×—×”:</label>
<input type="text" id="customerSurname" placeholder="×”×›× ×¡ ×©× ××©×¤×—×”" required class="styled-input">

<h2>×× ×•×ª ×¢×™×§×¨×™×•×ª</h2>

<!-- Substitua a div de Shabat existente por esta: -->
<div id="shabatDiv" style="display:none; border: 2px solid #1e90ff; border-radius: 15px; padding: 20px; background: #f0f8ff; max-width: 600px; margin: 20px auto 40px auto; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
  <h2>×œ×›×‘×•×“ ×©×‘×ª ×§×•×“×©</h2>

  <!-- ×—×œ×” ×œ×©×‘×ª -->
  <div class="drink-container">
    <label>×—×œ×” ×œ×©×‘×ª â€“ 18â‚ª</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button>
      <span>0</span>
      <button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×—×œ×” ×œ×©×‘×ª', 18, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  </div>

  <!-- ×‘×§×‘×•×§ ×™×™×Ÿ (××™×¥ ×¢× ×‘×™×) -->
  <div class="drink-container">
    <label>×‘×§×‘×•×§ ×™×™×Ÿ (××™×¥ ×¢× ×‘×™×) â€“ 35â‚ª</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button>
      <span>0</span>
      <button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×‘×§×‘×•×§ ×™×™×Ÿ (××™×¥ ×¢× ×‘×™×)', 35, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  </div>

  <!-- ×§×•×¤×¡×ª ××˜×‘×•×—×” 250 ×’×¨ -->
  <div class="drink-container">
    <label>×§×•×¤×¡×ª ××˜×‘×•×—×” (250×’×¨) â€“ 18â‚ª</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button>
      <span>0</span>
      <button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×§×•×¤×¡×ª ××˜×‘×•×—×” (250×’×¨)', 18, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  </div>

  <!-- ×§×•×¤×¡×ª ×—×•××•×¡ 250 ×’×¨ -->
  <div class="drink-container">
    <label>×§×•×¤×¡×ª ×—×•××•×¡ (250×’×¨) â€“ 18â‚ª</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button>
      <span>0</span>
      <button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×§×•×¤×¡×ª ×—×•××•×¡ (250×’×¨)', 18, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  </div>
</div>

<script>
// FUNÃ‡ÃƒO ORIGINAL: LIA DO localStorage (problema de persistÃªncia entre dispositivos)
/*
function checkShabat(){
  const shabatStatus = localStorage.getItem("shabat");
  const shabatDiv = document.getElementById("shabatDiv");

  if(shabatStatus === "on"){
    shabatDiv.style.display = "block";
  } else {
    shabatDiv.style.display = "none";
  }
}
checkShabat();
*/

// FUNÃ‡ÃƒO CORRIGIDA: LÃŠ O STATUS DO SERVIDOR
async function checkShabat(){
  const shabatDiv = document.getElementById("shabatDiv");
  try {
    const res = await fetch("/shabat-status");
    const data = await res.json();
    
    if(data.active){
      shabatDiv.style.display = "block";
    } else {
      shabatDiv.style.display = "none";
    }
  } catch(err) {
    console.error("Erro ao buscar status do Shabat:", err);
    shabatDiv.style.display = "none"; // Garante que nÃ£o aparece em caso de erro
  }
}

checkShabat();
</script>


<!-- Schnitzel -->
<div class="item">
  <label>×©× ×™×¦×œ ×‘×‘×’×˜ â€“ 60â‚ª</label>
  <div class="toppings">
    <label>×ª×•×¡×¤×•×ª:</label>
    <label><input type="checkbox" class="topping" data-name="×—×•××•×¡" data-price="0"> ×—×•××•×¡</label>
    <label><input type="checkbox" class="topping" data-name="×—×¨×™×£" data-price="0"> ×—×¨×™×£</label>
    <label><input type="checkbox" class="topping" data-name="×¡×œ×˜ ×™×©×¨××œ×™" data-price="0"> ×¡×œ×˜ ×™×©×¨××œ×™</label>
    <label><input type="checkbox" class="topping" data-name="×›×¨×•×‘ ×œ×‘×Ÿ" data-price="0"> ×›×¨×•×‘ ×œ×‘×Ÿ</label>
    <label><input type="checkbox" class="topping" data-name="×›×¨×•×‘ ×¡×’×•×œ" data-price="0"> ×›×¨×•×‘ ×¡×’×•×œ</label>
    <label><input type="checkbox" class="topping" data-name="×¦â€™×™×¤×¡ ×‘×¦×“" data-price="7"> ×¦â€™×™×¤×¡ ×‘×¦×“ (+7â‚ª)</label>
  </div>
  <button onclick="addToCart(this, 60, '×©× ×™×¦×œ ×‘×‘×’×˜')">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<!-- Shawarma -->
<div class="item">
  <label>×©×•×•××¨××” ×‘×‘×’×˜ â€“ 60â‚ª</label>
  <div class="toppings">
    <label>×ª×•×¡×¤×•×ª:</label>
    <label><input type="checkbox" class="topping" data-name="×—×•××•×¡" data-price="0"> ×—×•××•×¡</label>
    <label><input type="checkbox" class="topping" data-name="×—×¨×™×£" data-price="0"> ×—×¨×™×£</label>
    <label><input type="checkbox" class="topping" data-name="×¡×œ×˜ ×™×©×¨××œ×™" data-price="0"> ×¡×œ×˜ ×™×©×¨××œ×™</label>
    <label><input type="checkbox" class="topping" data-name="×›×¨×•×‘ ×œ×‘×Ÿ" data-price="0"> ×›×¨×•×‘ ×œ×‘×Ÿ</label>
    <label><input type="checkbox" class="topping" data-name="×›×¨×•×‘ ×¡×’×•×œ" data-price="0"> ×›×¨×•×‘ ×¡×’×•×œ</label>
    <label><input type="checkbox" class="topping" data-name="×¦â€™×™×¤×¡ ×‘×¦×“" data-price="7"> ×¦â€™×™×¤×¡ ×‘×¦×“ (+7â‚ª)</label>
  </div>
  <button onclick="addToCart(this, 60, '×©×•×•××¨××” ×‘×‘×’×˜')">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<!-- Chicken -->
<div class="item">
  <label>×—×–×” ×¢×•×£ ×‘×‘×’×˜ â€“ 60â‚ª</label>
  <div class="toppings">
    <label>×ª×•×¡×¤×•×ª:</label>
    <label><input type="checkbox" class="topping" data-name="×—×•××•×¡"> ×—×•××•×¡</label>
    <label><input type="checkbox" class="topping" data-name="×—×¨×™×£"> ×—×¨×™×£</label>
    <label><input type="checkbox" class="topping" data-name="×¡×œ×˜ ×™×©×¨××œ×™"> ×¡×œ×˜ ×™×©×¨××œ×™</label>
    <label><input type="checkbox" class="topping" data-name="×›×¨×•×‘ ×œ×‘×Ÿ"> ×›×¨×•×‘ ×œ×‘×Ÿ</label>
    <label><input type="checkbox" class="topping" data-name="×›×¨×•×‘ ×¡×’×•×œ"> ×›×¨×•×‘ ×¡×’×•×œ</label>
    <label><input type="checkbox" class="topping" data-name="×¦â€™×™×¤×¡ ×‘×¦×“" data-price="7"> ×¦â€™×™×¤×¡ ×‘×¦×“ (+7â‚ª)</label>
  </div>
  <button onclick="addToCart(this, 60, '×—×–×” ×¢×•×£ ×‘×‘×’×˜')">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<!-- Burger -->
<div class="item">
  <label>×”××‘×•×¨×’×¨ â€“ 50â‚ª</label>
  <div class="toppings">
    <label>×ª×•×¡×¤×•×ª:</label>
    <label><input type="checkbox" class="topping" data-name="×—×•××•×¡"> ×—×•××•×¡</label>
    <label><input type="checkbox" class="topping" data-name="×¢×’×‘× ×™×”"> ×¢×’×‘× ×™×”</label>
    <label><input type="checkbox" class="topping" data-name="×‘×¦×œ"> ×‘×¦×œ</label>
    <label><input type="checkbox" class="topping" data-name="×—×¡×”"> ×—×¡×”</label>
    <label><input type="checkbox" class="topping" data-name="×¦â€™×™×¤×¡ ×‘×¦×“" data-price="7"> ×¦â€™×™×¤×¡ ×‘×¦×“ +7â‚ª</label>
    <label><input type="checkbox" class="topping" data-name="×ª×•×¡×¤×ª ×§×¦×™×¦×”" data-price="10"> ×ª×•×¡×¤×ª ×§×¦×™×¦×” +10â‚ª</label>
  </div>
  <button onclick="addToCart(this, 50, '×”××‘×•×¨×’×¨')">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<h2>×¦â€™×™×¤×¡ ×‘×¦×“ â€“ 7â‚ª (×× ×” × ×¤×¨×“×ª)</h2>
<div class="drink-container">
  <label>×¦â€™×™×¤×¡ ×‘×¦×“</label>
  <div class="qty-control">
    <button onclick="changeQty(this, -1)">-</button>
    <span>0</span>
    <button onclick="changeQty(this, 1)">+</button>
  </div>
  <button onclick="addQtyToCart('×¦â€™×™×¤×¡ ×‘×¦×“', 7, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<h2>×©×ª×™×™×” â€“ 7â‚ª</h2>

<div class="drink-container">
  <label>×§×•×§×” ×§×•×œ×”</label>
  <div class="qty-control">
    <button onclick="changeQty(this, -1)">-</button>
    <span>0</span>
    <button onclick="changeQty(this, 1)">+</button>
  </div>
  <button onclick="addQtyToCart('×§×•×§×” ×§×•×œ×”', 7, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<div class="drink-container">
  <label>×§×•×œ×” ×–×™×¨×•</label>
  <div class="qty-control">
    <button onclick="changeQty(this, -1)">-</button>
    <span>0</span>
    <button onclick="changeQty(this, 1)">+</button>
  </div>
  <button onclick="addQtyToCart('×§×•×œ×” ×–×™×¨×•', 7, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<div class="drink-container">
  <label>××™×</label>
  <div class="qty-control">
    <button onclick="changeQty(this, -1)">-</button>
    <span>0</span>
    <button onclick="changeQty(this, 1)">+</button>
  </div>
  <button onclick="addQtyToCart('××™×', 7, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<div class="drink-container">
  <label>×¡×•×“×”</label>
  <div class="qty-control">
    <button onclick="changeQty(this, -1)">-</button>
    <span>0</span>
    <button onclick="changeQty(this, 1)">+</button>
  </div>
  <button onclick="addQtyToCart('×¡×•×“×”', 7, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
  <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
</div>

<script>
function changeQty(btn, delta){
  const span = btn.parentElement.querySelector('span');
  let qty = parseInt(span.textContent);
  qty += delta;
  if(qty < 0) qty = 0;
  span.textContent = qty;
}

function addToCart(btn, price, name){
  const parent = btn.parentElement;
  const toppings = [...parent.querySelectorAll('.topping:checked')].map(t=>t.dataset.name);
  const toppingsPrice = [...parent.querySelectorAll('.topping:checked')].reduce((sum,t)=>sum + parseInt(t.dataset.price || 0),0);
  parent.querySelectorAll('.topping:checked').forEach(t=> t.checked = false);
  cart.push({ name, price, toppings, toppingsPrice, type:"food" });
  updateCart();

  showAddedPopup();
}
function showAddedPopup(){
  const popup = document.getElementById("addedPopup");
  popup.classList.add("show");

  setTimeout(() => {
    popup.classList.remove("show");
  }, 800);
}

</script>

<!-- Cart button -->
<div id="cartToggle" onclick="toggleCart()">×¢×’×œ×” ×©×œ×™ ğŸ›’</div>

<!-- Cart panel -->
<div id="cart" class="cart">
  <div class="cart-header">
    <span>×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×™</span>
    <button onclick="toggleCart()">X</button>
  </div>
  ×”×¢×’×œ×” ×¨×™×§×”
  <button style="float:left;" onclick="sendOrder()">×©×œ×— ×”×–×× ×”</button>
</div>

<!-- Order message -->
<div id="orderMessage">
  ×”×”×–×× ×” × ×©×œ×—×” ×‘×”×¦×œ×—×”!<br>
  ×× × ×—×–×¨×• ×œ-WhatsApp ×›×“×™ ×œ××©×¨ ××ª ×”×”×–×× ×”.
  <br><br>

  <a id="whatsappKitchen" target="_blank">
    <button>×“×‘×¨ ×¢× ×”××˜×‘×— ×”×™×©×¨××œ×™</button>
  </a>
</div>

<script>
let cart = [];

function addItemFromInput(btn){
  const parent = btn.parentElement;
  const input = parent.querySelector('input');
  const qty = parseInt(input.value);
  const name = input.dataset.name;
  const price = parseInt(input.dataset.price);
  for(let i=0;i<qty;i++){
    cart.push({ name, price, toppings: [], toppingsPrice: 0, type: "drink" });
  }
  input.value = 0;
  updateCart();
}

function removeFromCart(idx){
  cart.splice(idx,1);
  updateCart();
}

function addQtyToCart(name, price, btn){
  const parent = btn.parentElement;
  const qtySpan = parent.querySelector(".qty-control span");
  const qty = parseInt(qtySpan.textContent);

  if(qty === 0) return;

  for(let i=0; i<qty; i++){
    cart.push({ name, price, toppings: [], toppingsPrice: 0, type: "drink" });
  }

  // Zera a quantidade
  qtySpan.textContent = "0";

  updateCart();
  showAddedPopup();
}

function updateCart(){
  const cartDiv = document.getElementById("cart");

  if(cart.length === 0){
    cartDiv.innerHTML = `
      <div class="cart-header">
        <span>×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×™</span>
        <button onclick="toggleCart()">X</button>
      </div>
      ×”×¢×’×œ×” ×¨×™×§×”
      <button style="float:left;" onclick="sendOrder()">×©×œ×— ×”×–×× ×”</button>
    `;
    return;
  }

  let html = `
    <div class="cart-header">
      <span>×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×™</span>
      <button onclick="toggleCart()">X</button>
    </div>
  `;

  cart.forEach((item, index) => {
    if(item.type === "qty"){
      html += `
        <div class="cart-item">
          ${item.name} Ã— ${item.qty} â€” â‚ª${item.price * item.qty}
          <button onclick="removeFromCart(${index})">X</button>
        </div>
      `;
    } else {
      const extra = item.toppings.length ? ` (${item.toppings.join(", ")})` : "";
      html += `
        <div class="cart-item">
          ${item.name}${extra} â€” â‚ª${item.price + item.toppingsPrice}
          <button onclick="removeFromCart(${index})">X</button>
        </div>
      `;
    }
  });

  const total = cart.reduce((sum, item) => {
    if (item.type === "qty") {
      return sum + item.price * item.qty;
    } else {
      return sum + item.price + (item.toppingsPrice || 0);
    }
  }, 0);

  html += `
    <div style="font-size: 1.5em; font-weight: bold; margin-top: 15px; border-top: 1px solid #ccc; padding-top: 10px;">
      ×¡×”"×›: â‚ª${total.toFixed(2)}
    </div>
    <button style="float:left;" onclick="sendOrder()">×©×œ×— ×”×–×× ×”</button>
  `;
  cartDiv.innerHTML = html;
}


function toggleCart(){
  document.getElementById('cart').classList.toggle('open');
}

async function sendOrder(){
  const name = document.getElementById('customerName').value.trim();
  const surname = document.getElementById('customerSurname').value.trim();
  if(!name || !surname){ alert("×× × ×”×›× ×¡ ×©× ×•×©× ××©×¤×—×”"); return; }
  if(cart.length < 1){ alert("×™×© ×œ×‘×—×•×¨ ×œ×¤×—×•×ª ×× ×” ××—×ª"); return; }

  const items = cart.filter(i => i.type === 'food');
  const drinks = cart.filter(i => i.type === 'drink');
  const total = items.reduce((sum,i)=>sum+i.price+i.toppingsPrice,0) + drinks.reduce((sum,i)=>sum+i.price,0);
  const order = { name, surname, items, drinks, total };

  try {
    await fetch("/orders", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(order)
    });

    // Limpa carrinho e formulÃ¡rio
    cart = [];
    updateCart();
    document.getElementById('customerName').value = '';
    document.getElementById('customerSurname').value = '';

    // Mostra a mensagem
    document.getElementById('orderMessage').style.display = 'flex';

    // Atualiza automaticamente o link do WhatsApp com o nome do cliente
    updateWhatsAppLink(name, surname);

  } catch(err){
    alert("Erro ao enviar o pedido! Verifique se o servidor estÃ¡ rodando.");
  }
}
</script>

<script>
function updateWhatsAppLink(name, surname) {
  const message =
    "×©×œ×•×, ×©×œ×—×ª×™ ×œ×›× ×”×–×× ×” ×©×œ ××•×›×œ ×¢×œ ×©×: " + name + " " + surname;

  const phone = "972559508114";

  const url =
    "https://wa.me/" +
    phone +
    "?text=" +
    encodeURIComponent(message);

  document.getElementById("whatsappKitchen").href = url;
}
</script>

</body>
</html>